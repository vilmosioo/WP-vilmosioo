/*! VilmosIoo - v1.3.11 */"use strict";var VI_GOL=function(a,b){var c,d,e,f={},g=125,h=Math.floor(666*g/1e3),i=!1,j=1e3,k=Math.floor(666*j/1e3),l=new Array(g*h),m=new Array(g*h),n=function(){c=document.getElementById("canvas-gol"),d=c.getContext("2d"),j=Math.min(j,b.body.clientWidth-20),k=Math.floor(666*j/1e3),c.width=j,c.height=k,c.style.width=j+"px",c.style.height=k+"px",e={glidergun:{$el:a("#glidergun"),pattern:"........................Ox......................O.Ox............OO......OO............OOx...........O...O....OO............OOxOO........O.....O...OOxOO........O...O.OO....O.Ox..........O.....O.......Ox...........O...Ox............OO"},ship:{$el:a("#ship"),pattern:"...Ox.O...OxOxO....OxOOOOO"},glider:{$el:a("#glider"),pattern:".Ox..OxOOO"},noah:{$el:a("#noah"),pattern:"..........O.Ox.........Ox..........O..Ox............OOOxxxxxx.OxO.OxxO..Ox..OOx...O"},space:{$el:a("#space"),pattern:"...........OO.....OOOOx.........OO.OO...O...Ox.........OOOO........Ox..........OO.....O..Oxx........Ox.......OO........OOx......O.........O..Ox.......OOOOO....O..Ox........OOOO...OO.OOx...........O....OOxxxx..................OOOOxO..O.............O...Ox....O................OxO...O............O..Ox.OOOO"},pentomino:{$el:a("#pentomino"),pattern:".OOxOOx.O"},$all:a("#glider, #noah, #ship, #space, #glidergun, #pentomino")}},o=function(){window.location=c.toDataURL("image/png")},p=function(){a(this).text(i?"Run":"Pause"),i=!i},q=function(){var b=a(this);e.$all.removeClass("active");for(var c in e)if(e.hasOwnProperty(c)&&e[c].$el.is(b))return void C(e[c])},r=function(){a("#save").click(o),a("#run").click(p);for(var b in e)e.hasOwnProperty(b)&&e[b].$el&&e[b].$el.click(q)},s=function(){var a=d.createRadialGradient(j/2,j/2,100,j/2,j/2,j);a.addColorStop(0,"#666"),a.addColorStop(1,"#000");for(var b=0;g>b;b++)for(var c=0;h>c;c++){var e=Math.floor(j/g),f=Math.floor(k/h);d.fillStyle="#aaa",d.fillRect(b*e,c*f,e,f),d.globalAlpha=.1,d.beginPath(),d.strokeStyle="#666",d.lineWidth=1,d.moveTo(b*e,c*f),d.lineTo(b*e+e,c*f),d.lineTo(b*e+e,c*f+f),d.lineTo(b*e,c*f+f),d.lineTo(b*e,c*f),d.stroke(),d.globalAlpha=1}},t=function(a,b){return 1===l[a*g+b]},u=function(a,b){return l[a*g+b]>=2},v=function(a,b){return l[a*g+b]},w=function(a,b,c){m[a*g+b]=c},x=function(a,b){return m[a*g+b]!==l[a*g+b]},y=function(a,b){var c=Math.floor(j/g),e=Math.floor(k/h);x(a,b)&&(d.fillStyle=1===m[a*g+b]?"#fff":m[a*g+b]>=2?"rgba(65,180,255,"+.75*m[a*g+b]/10+")":"#000",d.fillRect(a*c,b*e,c,e),l[a*g+b]=m[a*g+b])},z=function(a,b){var c=0;return t(a,b-1)&&c++,t(a,b+1)&&c++,t(a-1,b-1)&&c++,t(a-1,b)&&c++,t(a-1,b+1)&&c++,t(a+1,b-1)&&c++,t(a+1,b)&&c++,t(a+1,b+1)&&c++,0===a&&(t(g-1,b-1)&&c++,t(g-1,b)&&c++,t(g-1,b+1)&&c++),a===g-1&&(t(0,b-1)&&c++,t(0,b)&&c++,t(0,b+1)&&c++),b===h-1&&(t(a,0)&&c++,t(a-1,0)&&c++,t(a+1,0)&&c++),0===b&&(t(a,h-1)&&c++,t(a-1,h-1)&&c++,t(a+1,h-1)&&c++),c},A=function(a){for(var b=g/5,c=0,d=0,e=0;c<a.length;){var f=a.charAt(c++);"O"===f&&w(b+e,b+d,1),"x"===f&&(e=-1,d++),e++}},B=function(){if(i){var a=0,b=0;for(a=0;g>a;a++)for(b=0;h>b;b++){var c=z(a,b);t(a,b)?1>=c?w(a,b,2):c>=4&&w(a,b,2):3===c?w(a,b,1):u(a,b)&&(v(a,b)>=10?w(a,b,0):w(a,b,v(a,b)+1))}for(a=0;g>a;a++)for(b=0;h>b;b++)y(a,b)}window.requestAnimationFrame(B)},C=function(a){a.$el.addClass("active"),d.clearRect(0,0,j,k),l.length=0,m.length=0,s(),A(a.pattern),window.requestAnimationFrame(B)};return f.load=function(){n(),r(),p(),C(e.glidergun)},f}(jQuery,document);jQuery(VI_GOL.load);