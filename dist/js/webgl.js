/*! VilmosIoo - v1.1.0 */var APP=function(a,b){var c,d,e,f,g;return a.load=function(b){var c=new XMLHttpRequest;c.open("GET",b,!0),c.responseType="arraybuffer",c.onload=function(){200==this.status?a.parse(this.response):console.log("error loading")},c.send()},a.parse=function(a){for(var b=new DataView(a),c="",d=0;80>d;)c+=String.fromCharCode(b.getUint8(d++));console.log("Header "+c);var e=b.getUint32(d,!0);d+=4,console.log("Triangles "+e);for(var g=0,h=new THREE.Geometry,i=0,j=0,k=0,l=0;e>g;){d+=12;for(var m=0;3>m;m++){var n=b.getFloat32(d,!0);d+=4;var o=b.getFloat32(d,!0);d+=4;var p=b.getFloat32(d,!0);d+=4,i>n&&(i=n),n>j&&(j=n),k>o&&(k=o),o>l&&(l=o),h.vertices.push(new THREE.Vector3(n,o,p)),d+=12}d+=2,h.faces.push(new THREE.Face3(3*g,3*g+1,3*g+2)),g++}h.computeFaceNormals();var q=new THREE.Mesh(h,new THREE.MeshLambertMaterial({color:13369344,side:THREE.DoubleSide}));q.scale.set(200/(j-i),200/(j-i),200/(j-i)),q.position.set(0,0,0),f.add(q),console.log(q),console.log("minX "+i+"maxX "+j+"minY "+k+"maxY "+l)},a.init=function(){var h=b("#webgl"),i=h.width(),j=h.height(),k=45,l=i/j,m=.1,n=1e4;d=new THREE.WebGLRenderer({antialias:!0}),e=new THREE.PerspectiveCamera(k,l,m,n),f=new THREE.Scene,e.position.set(0,400,1e3),g=new THREE.TrackballControls(e,d.domElement),g.rotateSpeed=2,g.zoomSpeed=2.4,g.panSpeed=1.6,g.noZoom=!1,g.noPan=!1,g.staticMoving=!0,g.dynamicDampingFactor=.3,g.keys=[65,83,68],d.setSize(i,j),d.setClearColor(16777215,1),h.append(d.domElement);var o=new THREE.MeshLambertMaterial({color:13369344});o=new THREE.MeshLambertMaterial({map:THREE.ImageUtils.loadTexture("http://vilmosioo.co.uk/wp-content/uploads/2013/04/map.jpg")});var p=100,q=64,r=64;c=new THREE.Mesh(new THREE.SphereGeometry(p,q,r),o),c.position.set(0,p,0);var s=50,t=50,u=200,v=200,w=new THREE.Mesh(new THREE.PlaneGeometry(s*u,t*v,s,t),new THREE.MeshBasicMaterial({color:6710886,wireframe:!0}));w.rotation.set(Math.PI/2,0,0),f.add(w),f.add(e);var x=new THREE.PointLight(16777215);x.position.set(0,0,1e3).normalize(),f.add(x);var y=new THREE.AmbientLight(4473924);f.add(y);var z=new THREE.DirectionalLight(16777215);z.position.set(0,0,1e3).normalize(),f.add(z),requestAnimationFrame(a.animloop),a.load("http://vilmosioo.co.uk/wp-content/themes/vilmosioo/js/sun.stl")},a.animloop=function(){g.update(),c.rotation.y+=.003,d.render(f,e),requestAnimationFrame(a.animloop)},a}(APP||{},jQuery);jQuery(document).ready(APP.init),function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();